!function(e){function n(r){if(t[r])return t[r].exports;var o=t[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}var t={};return n.m=e,n.c=t,n.p="",n(0)}([function(e,n,t){window.inc=t(1)},function(e,n,t){var r=t(2),o=t(3),u=t(4),i=t(5),c={};c.store=r,c.merge=o;var a={bizname:"",isStore:!1,clearStoreIfCantSave:!0,useSign:!0,serverUrl:"",cdnUrl:"",hook:null,count:null},l={bizname:function(e){r.setPrefix(e+":")},serverUrl:o.setUrl,cdnUrl:o.setCdnUrl},f={},s={},v={},d={},p={},g=[],m=function(e){g.push(e)},h=function(){setTimeout(function(){for(var e=0;e<g.length;e++)setTimeout(g[e])},500)},S=function(e){var n={};return e?(e.url&&(n.url=e.url),e.name&&(n.name=e.name),e.version&&(n.version=e.version),e.sign&&(n.sign=e.sign),n):n},x=function(){return function(){}},C=function(){},y=function(){},E={};E[o.RESULT_TYPE.FAILED]="error",E[o.RESULT_TYPE.SUCCESS_WITH_DIFF]="patch",E[o.RESULT_TYPE.SUCCESS_WITH_FULL_CONTENT]="full",E[o.RESULT_TYPE.SUCCESS_WITHOUT_DIFF]="none";var T=function(e){var n=i();return a.hook("pre",e||{},n,{},a),function(t){t.hasOwnProperty("module")&&(t.module=S(t.module)),t.hasOwnProperty("content")&&(t.size="string"==typeof t.content?t.content.length:0,delete t.content),t.hasOwnProperty("mergeCode")&&(t.type=E[t.mergeCode]||"unknown",delete t.mergeCode),a.hook("post",e||{},n,t,a)}},_=function(e){a.count(e,a)},I=function(e,n){a.catch(e,n,a)},U=x,b=C,k=y;r.invokeHook=function(){return U.apply(null,arguments)},r.invokeCount=function(){return b.apply(null,arguments)},r.reportError=function(){return k.apply(null,arguments)},o.invokeHook=function(){return U.apply(null,arguments)},o.invokeCount=function(){return b.apply(null,arguments)},o.reportError=function(){return k.apply(null,arguments)};var w=function(e){var n,t,r=0;if(0===e.length)return r;for(n=0;n<e.length;n++)t=e.charCodeAt(n),r=(r<<5)-r+t,r|=0;return String(r)},L=function(e){if(e){var n=U("sign"),t=w(e);return n({content:e}),"hc1:"+t}},F=function(e,n){return!!(a.useSign&&e&&n)&&e!==n},N=function(e){e&&/\S/.test(e)&&window.eval.call(window,e)},H=function(e){var n=document.createElement("style");n.textContent=e,document.head.appendChild(n)},O=function(e,n){var t=document.createElement("script");t.async=!0,t.onload=n,t.src=e,document.head.appendChild(t)},D=function(e){var n=e.url,t=e.content,o=e.name,u=e.callback;setTimeout(function(){if(t){p[n]=t;var i=U("execute");try{N(t,e)}catch(e){k(e,{url:n})}return i({type:"js",module:e}),void u()}var c=p[n];if(c)try{var i=U("execute");N(p[n],e),i({type:"js",module:e}),u()}catch(t){k(t,{url:n}),b("store:remove:bo-eval-illegal"),r.removeItem(o);var i=U("native-invoke");O(n,function(){i({type:"js",module:e}),u&&u()})}else{b("store:remove:bo-content"),r.removeItem(o);var i=U("native-invoke");O(n,function(){i({type:"js",module:e}),u&&u()})}},0)},W=function(e,n){var t=document.createElement("link");t.rel="stylesheet",t.type="text/css",t.href=e,t.onload=n,document.head.appendChild(t)},P=function(e){var n=e.url,t=e.content,o=e.name,u=e.callback;setTimeout(function(){if(t){p[n]=t;var i=U("execute");return H(t),i({type:"css",module:e}),void u()}var c=p[n];if(c){var i=U("execute");H(c),i({type:"css",module:e}),u()}else{b("store:remove:bo-content"),r.removeItem(o);var i=U("native-invoke");W(n,function(){i({type:"css",module:e}),u&&u()})}})},M=function(e){var n=e.url,t=e.name,r=e.sign,o=e.content||p[n],i=e.callback,c=function(e){var n=e.replace(/[#?].*$/,"").split(".");return n[n.length-1]}(n),a="js"===c?D:"css"===c?P:null;if(!a)return k(new Error("Illegal extname: "+c),{url:n}),void i();if(o)a({url:n,name:t,sign:r,content:o,callback:i});else{var l=U("fetch");b("full-fetch:bo-content"),u(n,function(o){l({mode:"full",content:o,module:e}),a({url:n,name:t,sign:r,content:o,callback:i}),m(function(){var e=L(o);F(r,e)&&(k(new Error("Merge content sign not match"),{url:n,specifiedSign:r,calculatedSign:e,contentHead:o.substr(0,250),contentTail:o.substr(-250),referrer:document.referrer}),b("sign:invalid"))})})}},j=function(n,t,r){var o=t.length,u=function(){!--o&&r&&r(n)};if(0===o)return void(r&&r());for(var i=0;i<t.length;i++){var c=t[i],a=f[c];"function"!=typeof e&&"undefined"!=typeof a?a.rely&&0!==a.rely.length?j(n,a.rely,function(e){return function(){n.push(c),u()}}(a)):(n.push(c),u()):u()}},R=function(e){var n=e.url,t=e.name,i=e.version,c=e.callback,l=e.sign;if(!v[n]||d[n])if(s[n]&&p[n]&&!d[n]){if(c)return void c(p[n])}else{if(v[n]=!0,d[n]=!1,a.isStore){var f=U("store:load"),g=r.getItem(t);f({content:g}),g||(g={},b("no-cache"));var h=g.c||"",S=g.u||"",x=g.v||"",C=g.s||"",y=S===n.replace(/[?#].*$/,"")||i&&l&&x===i&&C===l;if(y)return s[n]=!0,v[n]=!1,p[n]=h,void(c&&(b("hit-cache"),c(h)));var E=i?S:"";return void o.merge(E,n,h,function(e,o){var u=e&&L(e);if(m(function(){F(l,u)&&(k(new Error("Merge content sign not match"),{code:o,source:E,target:n,specifiedSign:l,calculatedSign:u,contentHead:e.substr(0,250),contentTail:e.substr(-250)}),b("sign:invalid"))}),s[n]=!0,v[n]=!1,p[n]=e,e&&i&&n){var f=U("store:save"),d=r.setItem(t,e,i,n,u);f({content:e}),d||(b("store:save-failed:bo-illegal"),a.isStore=!1,a.clearStoreIfCantSave&&r.clear())}c&&c(e)})}var T=U("fetch");u(n,function(t){T({mode:"full",module:e}),m(function(){var e=L(t);F(l,e)&&(k(new Error("Merge content sign not match"),{url:n,specifiedSign:l,calculatedSign:e,contentHead:t.substr(0,250),contentTail:t.substr(-250),referrer:document.referrer}),b("sign:invalid"))}),t?(s[n]=!0,v[n]=!1,p[n]=t,c&&c(t)):(d[n]=!0,R(e))})}else if(c)return void setTimeout(function(){R(e)})},$=function(e,n){j([],e,function(e){var t=e.length,r=function(){!--t&&n&&n()};if(0===t)return void(n&&n());for(var o=0;o<e.length;o++){var u=e[o],i=f[u];R({url:i.path,name:u,version:i.version,callback:r,sign:i.sign})}})},Y=function(e,n){var t=e.length,r=function(){!--t&&n&&n()};if(0===t)return void(n&&n());for(var o=0;o<e.length;o++){var u=e[o],i=f[u];"function"!=typeof u?"undefined"!=typeof i?i.rely&&0!==i.rely.length?Y(i.rely,function(e){return function(){M({url:e.path,name:u,sign:e.sign,callback:r})}}(i)):M({url:i.path,name:u,sign:i.sign,callback:r}):(console&&console.warn&&console.warn("In Error :: Module not found: "+u),r()):(e[o](),r())}},A=function(e,n){return 0===arguments.length?a:1===arguments.length?a[e]:(a[e]=n,l[e]&&l[e](n),n)},J=function(e,n){e&&n&&(f[e]="string"==typeof n?{path:n}:n)},z=function(e){if(e.modules)for(var n in e.modules)if(e.modules.hasOwnProperty(n)){var t=e.modules[n];if(!e.modules.hasOwnProperty(n))continue;J(n,t)}},q=function(){var e=function(){},n=[].slice.call(arguments);"function"==typeof n[n.length-1]&&(e=n.pop());var t=function(){e(),h()};"function"==typeof a.hook&&(U=T),"function"==typeof a.count&&(b=_),"function"==typeof a.catch&&(k=I),a.isStore?$(n,function(){Y(n,t)}):Y(n,t)},B=function(){f={},s={},v={},d={},p={},U=x,b=C,k=y};c.config=A,c.add=J,c.adds=z,c.use=q,c.reset=B,e.exports=c},function(e,n){function t(){if(e.exports.reportError)return e.exports.reportError.apply(null,arguments)}function r(e){p=e}function o(){return p}function u(e){if(!e)return!1;try{var n=d.getItem(p+e);return Boolean(n)}catch(e){return t(e),!1}}function i(e){if(!e)return null;try{var n=d.getItem(p+e);return n?JSON.parse(n):null}catch(e){return t(e),null}}function c(e,n,r,o,u){if(!(e&&n&&r&&o))return!1;try{var i={u:o.replace(/[?#].*$/,""),v:r,c:n};return u&&(i.s=u),d.setItem(p+e,JSON.stringify(i)),!0}catch(e){return t(e,{url:o,version:r,sign:u}),!1}}function a(e){if(!e)return!1;try{return d.removeItem(p+e),!0}catch(e){return t(e),!1}}function l(e){var n=i(e);return n?n.v:""}function f(e){var n=i(e);return n?n.c:""}function s(e){var n=i(e);return n?n.u:""}function v(){if(p)for(var e in d)0===e.indexOf(p)&&d.removeItem(e)}var d=window.localStorage,p="";e.exports={setPrefix:r,getPrefix:o,isExist:u,getItem:i,setItem:c,removeItem:a,getVersion:l,getContent:f,getUrl:s,clear:v}},function(e,n,t){function r(){return e.exports.invokeHook?e.exports.invokeHook.apply(null,arguments):function(){}}function o(){return e.exports.invokeCount?e.exports.invokeCount.apply(null,arguments):function(){}}function u(){if(e.exports.reportError)return e.exports.reportError.apply(null,arguments)}function i(e){p=e}function c(e){g=e}function a(e,n){for(var t=r("merge:calculation"),o="",u=n,i=null,c=0;c<u.length;c++){var a=u[c];if("object"==typeof a){var l=a[0]-1,f=a[1];i&&(l+=i[0]),i=a,o+=e.substring(l,l+f)}else o+=a}return t({}),o}function l(e,n){return g+e.replace(/(http:|https:|\/)/g,"").replace(/[?#].*$/,"")+"-"+n.replace(/(http:|https:|\/)/g,"").replace(/[?#].*$/,"")}function f(e,n){return p+"?target="+e.replace(/[?#].*$/,"")+"&source="+n.replace(/[?#].*$/,"")}function s(e,n,t){var o=r("merge:pull-diff"),i=l(n,e);d(i,function(c){if(c){var a=c[c.length-1];o({mergeCode:a}),t(Number(a)===h.SUCCESS_WITH_DIFF||Number(a)===h.SUCCESS_WITH_FULL_CONTENT?{code:Number(a),data:c.substr(0,c.length-1)}:{code:Number(a)})}else{o({mergeCode:-1}),u(new Error("Diff patch not found"),{source:e,target:n,url:i}),o=r("merge:request-diff");var l=f(n,e);d(l,function(r,i){if(/application\/json/i.test(i.getResponseHeader("Content-Type"))){var c=JSON.parse(r),a=Number(c.code),f=c.data;o({mergeCode:a}),t({code:a,data:f})}else u(new Error("Diff server did not response valid content with status: "+i.status),{body:r,source:e,target:n,url:l}),o({mergeCode:-1}),t({code:h.FAILED})})}})}function v(e,n,t,r){if(p&&g||(u(new Error("Server url not set")),console&&console.error&&console.error("In Error :: Server url not set")),!e)return void d(n,function(e){r(e,h.SUCCESS_WITH_FULL_CONTENT)});try{s(e,n,function(i){var c=i.code,l=i.data;o("merge:code:"+c),c===h.SUCCESS_WITH_DIFF?l.length>m?(o("merge:diff-fat"),u(new Error("Diff is too big"),{lengthLimit:m,receivedLength:l.length,source:e,target:n,code:c}),d(n,function(e){r(e,h.SUCCESS_WITH_FULL_CONTENT)})):(o("merge:diff-thin"),r(a(t,JSON.parse(l)),c)):c===h.SUCCESS_WITH_FULL_CONTENT?r(l,c):c===h.SUCCESS_WITHOUT_DIFF?r(t,c):(u(new Error("Illegal merge result code:"+c+"  [fallback to full-fetch]"),{source:e,target:n}),d(n,function(e){r(e,h.SUCCESS_WITH_FULL_CONTENT)}))})}catch(t){u(t,{source:e,target:n}),d(n,function(e){r(e,h.SUCCESS_WITH_FULL_CONTENT)})}}var d=t(4),p="",g="",m=65536,h={FAILED:0,SUCCESS_WITH_DIFF:1,SUCCESS_WITH_FULL_CONTENT:2,SUCCESS_WITHOUT_DIFF:3};e.exports={_merge:a,_getMixDiff:s,setUrl:i,setCdnUrl:c,merge:v,RESULT_TYPE:h}},function(e,n){e.exports=function(e,n){var t=new window.XMLHttpRequest;return t.open("GET",e,!0),t.onreadystatechange=function(){4===t.readyState&&(200===t.status?n(t.responseText,t):n(null,t))},t.send(null)}},function(e,n){e.exports=function(){var e=(new Date).getTime(),n="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){var t=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==n?t:3&t|8).toString(16)});return n}}]);